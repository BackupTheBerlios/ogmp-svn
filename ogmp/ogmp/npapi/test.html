<HTML>
<HEAD>
<TITLE>Simple Plug-in Test</TITLE>
<script type="text/javascript">

  function get_ip(sipua)
  {
	 document.sipua.get_ip();
  }

  function get_ip_return(result)
  {
	 document.formname.status.value=result;
	 alert(result);
  }

  function regist_return(result, reason)
  {
	 document.formname.status.value=result;
	 alert(result);
  }

  function load_user_return(result)
  {
	 document.formname.status.value=result;
	 alert(result);
  }
</script>

</HEAD>
<BODY>

<center>
<h1> XPConnect Scriptable Sample Plug-in </h1>
</center>

This page contains a testcase which demonstrates the work of scriptable 
plug-in with Mozilla. This example plug-in has no native GUI and does not 
draw anything in the plugin window. Clicking on the button will result in calling 
native plugin method from JavaScript. Show Version will instruct the plug-in 
to retrieve the Mozilla user agent string and return it to JavaScript to show
in the alert box.

<br><br>

<center>

<embed name="sipua" type="application/x-vnd-realmtel-sipua" width=1 height=1 hidden="true" />

<br>

<!--

//Load user with userid('bin1').
document.sipua.load_user(userid);

//register user with user fullname('Bin Zhang'), strlen(fullname), home_sip_router('hubble.realmtel.net'), user_sipid('bin1@realmtel.net'), expire_seconds(1800)
document.sipua.regist(user_fullname, user_fnsz, home_router, user_at_domain, expire_seconds);

//unregister home_sip_router('hubble.realmtel.net') user('bin1@realmtel.net')
document.sipua.unregist(home_router, user_at_domain);

//Create a call with title('Hello') and description('Discuss tech issue with you')
document.sipua.new_call(title, description);

//call destination('bin8@realmtel.net')
document.sipua.call(callee_at_dest_domain);

//answer call on lineno(2)
document.sipua.answer(lineno);

//hangup call on lineno(3)
document.sipua.bye(lineno);

//-->

<script language="javascript">
<!--
  if (document.sipua)
  {
	document.write(document.sipua.useragent);
	document.write(document.sipua.licence);
	document.write(document.sipua.version);
  }
  else
  {
    alert("No plugin");
  }
//-->
</script>

<br>

<form name="formname">
<input type="text" name="status" value="idle">
<input type="button" value="get ip" onclick='get_ip(sipua)'>
<input type="button" value="load_user" onclick='document.sipua.load_user("hling", "hling".length)'>
<input type="button" value="register" onclick='document.sipua.regist("Heming Ling", "Heming Ling".length, "rosella.timedia.org", "heming@timedia.org", 1800)'>
</form>

</center>

</BODY>
</HTML>
